{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,UACjCC,MAAEC,EAAKC,KAAEC,EAAIC,OAAEC,GAAWR,EAAQS,SAExC,IAAIC,EAAe,EAsBnB,SAASC,EAAcC,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,MAYb,SAAwBC,GACtBA,EACGC,MAAK,EAACP,SAAEA,EAAUT,MAAAiB,KACjBC,EAAAvB,GAASwB,OAAOC,QAAQ,qBAAqBX,QAAeQ,MAAW,CACrEI,QAAS,QAGZC,OAAM,EAACb,SAAEA,EAAUT,MAAAuB,KAClBL,EAAAvB,GAASwB,OAAOK,QAAQ,oBAAoBf,QAAec,MAAW,CACpEF,QAAS,O,CAbbI,CAPgB,IAAIC,SAAQ,CAACC,EAASC,KAChCjB,EACFgB,EAAQ,C,SAAElB,EAAUT,MAAAU,IAEpBkB,EAAO,C,SAAEnB,EAAUT,MAAAU,GAAQ,IAGR,GACtBA,E,CA/BLb,EAAQgC,iBAAiB,UAEzB,SAAsBC,GACpBA,EAAIC,iBACJ,MAAMC,EAAWC,OAAOhC,EAAMiC,OACxBC,EAAUF,OAAO9B,EAAK+B,OACtBE,EAAYH,OAAO5B,EAAO6B,OAChC3B,EAAeyB,EAIjB,SAAuBK,EAAMC,GAC3B,IAAK,IAAIC,EAAI,EAAGA,GAAKD,EAAQC,GAAK,EAC5BA,EAAI,IACNhC,GAAgB8B,GAElB7B,EAAc+B,EAAGhC,E,CARnBiC,CAAcL,EAASC,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formRef = document.querySelector('.form');\nconst { delay, step, amount } = formRef.elements;\n\nlet delayCounter = 0;\n\nformRef.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const delayRef = Number(delay.value);\n  const stepRef = Number(step.value);\n  const amountRef = Number(amount.value);\n  delayCounter = delayRef;\n  trackPromises(stepRef, amountRef);\n}\n\nfunction trackPromises(step, amount) {\n  for (let i = 1; i <= amount; i += 1) {\n    if (i > 1) {\n      delayCounter += step;\n    }\n    createPromise(i, delayCounter);\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  setTimeout(() => {\n    const promise = new Promise((resolve, reject) => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    });\n    processPromise(promise);\n  }, delay);\n}\n\nfunction processPromise(promise) {\n  promise\n    .then(({ position, delay }) =>\n      Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`, {\n        timeout: 3000,\n      })\n    )\n    .catch(({ position, delay }) =>\n      Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`, {\n        timeout: 3000,\n      })\n    );\n}\n\n// ===== СТАРИЙ КОД (теж працює, але занадтно мудрьоний) =====\n\n// function trackPromises(delay, step, amount) {\n//   setTimeout(() => {\n//     if (amount === 0) {\n//       return;\n//     }\n//     createPromise(promiseCounter, delayCounter);\n\n//     const intervalId = setInterval(() => {\n//       if (promiseCounter === amount) {\n//         clearInterval(intervalId);\n//         promiseCounter = 1;\n//         delayCounter = 0;\n//         return;\n//       }\n//       promiseCounter += 1;\n//       delayCounter += step;\n//       createPromise(promiseCounter, delayCounter);\n//     }, step);\n//   }, delay);\n// }\n\n// function onFormSubmit(evt) {\n//   evt.preventDefault();\n//   const delayRef = Number(delay.value);\n//   const stepRef = Number(step.value);\n//   const amountRef = Number(amount.value);\n//   delayCounter = delayRef;\n//   trackPromises(delayRef, stepRef, amountRef);\n// }\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$formRef","document","querySelector","delay","$47d4ff9957288465$var$delay","step","$47d4ff9957288465$var$step","amount","$47d4ff9957288465$var$amount","elements","$47d4ff9957288465$var$delayCounter","$47d4ff9957288465$var$createPromise","position","delay1","shouldResolve","Math","random","setTimeout","promise","then","delay2","$parcel$interopDefault","Notify","success","timeout","catch","delay3","failure","$47d4ff9957288465$var$processPromise","Promise","resolve","reject","addEventListener","evt","preventDefault","delayRef","Number","value","stepRef","amountRef","step1","amount1","i","$47d4ff9957288465$var$trackPromises"],"version":3,"file":"03-promises.7d77720d.js.map"}