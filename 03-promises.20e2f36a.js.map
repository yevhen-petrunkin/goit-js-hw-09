{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAUC,SAASC,cAAc,SACPC,EAAAH,EAAQI,SAAhCC,EAAwBF,EAAxBG,MAAOC,EAAiBJ,EAAjBK,KAAMC,EAAWN,EAAXO,OAEjBC,EAAiB,EACjBC,EAAe,EAkCnB,SAASC,EAAcC,EAAUC,GAC/B,IAAMC,EAAgBC,KAAKC,SAAW,IAWxC,SAAwBC,GACtBA,EACGC,MAAK,SAAAC,G,IAAGP,EAAQO,EAARP,SAAUQ,EAAKD,EAALf,M,OACjBiB,EAAAzB,GAAS0B,OAAOC,QAAQ,qBAAoCC,OAAfZ,EAAS,QAAYY,OAANJ,EAAM,MAAK,CACrEK,QAAS,K,IAGZC,OAAM,SAAAP,G,IAAGP,EAAQO,EAARP,SAAUe,EAAKR,EAALf,M,OAClBiB,EAAAzB,GAAS0B,OAAOM,QAAQ,oBAAmCJ,OAAfZ,EAAS,QAAYY,OAANG,EAAM,MAAK,CACpEF,QAAS,K,IAZfI,CAPgB,IAAIC,SAAQ,SAACC,EAASC,GAChClB,EACFiB,EAAQ,CAAEnB,WAAUR,MAAAS,IAEpBmB,EAAO,CAAEpB,WAAUR,MAAAS,G,KAtCzBf,EAAQmC,iBAAiB,UAEzB,SAAsBC,GACpBA,EAAIC,iBACJ,IAAMC,EAAWC,OAAOlC,EAAMmC,OACxBC,EAAUF,OAAOhC,EAAKiC,OACtBE,EAAYH,OAAO9B,EAAO+B,OAChC5B,EAAe0B,EAIMK,EAHPL,EAGcM,EAHJH,EAGUI,EAHDH,EAIjCI,YAAW,WACT,GAAe,IAAXD,EAAJ,CAGAhC,EAAcF,EAAgBC,GAE9B,IAAMmC,EAAaC,aAAY,WAC7B,GAAIrC,IAAmBkC,EAIrB,OAHAI,cAAcF,GACdpC,EAAiB,OACjBC,EAAe,GAKjBC,EAFAF,GAAkB,EAClBC,GAAgBgC,E,GAEfA,EAdD,C,GAeDD,GAlBL,IAAuBA,EAAOC,EAAMC,C","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formRef = document.querySelector('.form');\nconst { delay, step, amount } = formRef.elements;\n\nlet promiseCounter = 1;\nlet delayCounter = 0;\n\nformRef.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const delayRef = Number(delay.value);\n  const stepRef = Number(step.value);\n  const amountRef = Number(amount.value);\n  delayCounter = delayRef;\n  trackPromises(delayRef, stepRef, amountRef);\n}\n\nfunction trackPromises(delay, step, amount) {\n  setTimeout(() => {\n    if (amount === 0) {\n      return;\n    }\n    createPromise(promiseCounter, delayCounter);\n\n    const intervalId = setInterval(() => {\n      if (promiseCounter === amount) {\n        clearInterval(intervalId);\n        promiseCounter = 1;\n        delayCounter = 0;\n        return;\n      }\n      promiseCounter += 1;\n      delayCounter += step;\n      createPromise(promiseCounter, delayCounter);\n    }, step);\n  }, delay);\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  const promise = new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n  processPromise(promise);\n}\n\nfunction processPromise(promise) {\n  promise\n    .then(({ position, delay }) =>\n      Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`, {\n        timeout: 3000,\n      })\n    )\n    .catch(({ position, delay }) =>\n      Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`, {\n        timeout: 3000,\n      })\n    );\n}\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$formRef","document","querySelector","$ce04d3a99e08e73b$var$_elements","elements","$ce04d3a99e08e73b$var$delay","delay","$ce04d3a99e08e73b$var$step","step","$ce04d3a99e08e73b$var$amount","amount","$ce04d3a99e08e73b$var$promiseCounter","$ce04d3a99e08e73b$var$delayCounter","$ce04d3a99e08e73b$var$createPromise","position","delay2","shouldResolve","Math","random","promise","then","param","delay3","$parcel$interopDefault","Notify","success","concat","timeout","catch","delay4","failure","$ce04d3a99e08e73b$var$processPromise","Promise","resolve","reject","addEventListener","evt","preventDefault","delayRef","Number","value","stepRef","amountRef","delay1","step1","amount1","setTimeout","intervalId","setInterval","clearInterval"],"version":3,"file":"03-promises.20e2f36a.js.map"}