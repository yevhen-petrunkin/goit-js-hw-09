{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAUC,SAASC,cAAc,SACPC,EAAAH,EAAQI,SAAhCC,EAAwBF,EAAxBG,MAAOC,EAAiBJ,EAAjBK,KAAMC,EAAWN,EAAXO,OAEjBC,EAAe,EAsBnB,SAASC,EAAcC,EAAUC,GAC/B,IAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,YAYb,SAAwBC,GACtBA,EACGC,MAAK,SAAAC,G,IAAGR,EAAQQ,EAARR,SAAUS,EAAKD,EAALf,M,OACjBiB,EAAAzB,GAAS0B,OAAOC,QAAQ,qBAAoCC,OAAfb,EAAS,QAAYa,OAANJ,EAAM,MAAK,CACrEK,QAAS,K,IAGZC,OAAM,SAAAP,G,IAAGR,EAAQQ,EAARR,SAAUgB,EAAKR,EAALf,M,OAClBiB,EAAAzB,GAAS0B,OAAOM,QAAQ,oBAAmCJ,OAAfb,EAAS,QAAYa,OAANG,EAAM,MAAK,CACpEF,QAAS,K,IAbbI,CAPgB,IAAIC,SAAQ,SAACC,EAASC,GAChCnB,EACFkB,EAAQ,CAAEpB,WAAUP,MAAAQ,IAEpBoB,EAAO,CAAErB,WAAUP,MAAAQ,G,OAItBA,E,CA/BLd,EAAQmC,iBAAiB,UAEzB,SAAsBC,GACpBA,EAAIC,iBACJ,IAAMC,EAAWC,OAAOlC,EAAMmC,OACxBC,EAAUF,OAAOhC,EAAKiC,OACtBE,EAAYH,OAAO9B,EAAO+B,OAChC7B,EAAe2B,EAIjB,SAAuBK,EAAMC,GAC3B,IAAK,IAAIC,EAAI,EAAGA,GAAKD,EAAQC,GAAK,EAC5BA,EAAI,IACNlC,GAAgBgC,GAElB/B,EAAciC,EAAGlC,E,CARnBmC,CAAcL,EAASC,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formRef = document.querySelector('.form');\nconst { delay, step, amount } = formRef.elements;\n\nlet delayCounter = 0;\n\nformRef.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  const delayRef = Number(delay.value);\n  const stepRef = Number(step.value);\n  const amountRef = Number(amount.value);\n  delayCounter = delayRef;\n  trackPromises(stepRef, amountRef);\n}\n\nfunction trackPromises(step, amount) {\n  for (let i = 1; i <= amount; i += 1) {\n    if (i > 1) {\n      delayCounter += step;\n    }\n    createPromise(i, delayCounter);\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  setTimeout(() => {\n    const promise = new Promise((resolve, reject) => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    });\n    processPromise(promise);\n  }, delay);\n}\n\nfunction processPromise(promise) {\n  promise\n    .then(({ position, delay }) =>\n      Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`, {\n        timeout: 3000,\n      })\n    )\n    .catch(({ position, delay }) =>\n      Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`, {\n        timeout: 3000,\n      })\n    );\n}\n\n// ===== СТАРИЙ КОД (теж працює, але занадтно мудрьоний) =====\n\n// function trackPromises(delay, step, amount) {\n//   setTimeout(() => {\n//     if (amount === 0) {\n//       return;\n//     }\n//     createPromise(promiseCounter, delayCounter);\n\n//     const intervalId = setInterval(() => {\n//       if (promiseCounter === amount) {\n//         clearInterval(intervalId);\n//         promiseCounter = 1;\n//         delayCounter = 0;\n//         return;\n//       }\n//       promiseCounter += 1;\n//       delayCounter += step;\n//       createPromise(promiseCounter, delayCounter);\n//     }, step);\n//   }, delay);\n// }\n\n// function onFormSubmit(evt) {\n//   evt.preventDefault();\n//   const delayRef = Number(delay.value);\n//   const stepRef = Number(step.value);\n//   const amountRef = Number(amount.value);\n//   delayCounter = delayRef;\n//   trackPromises(delayRef, stepRef, amountRef);\n// }\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$formRef","document","querySelector","$ce04d3a99e08e73b$var$_elements","elements","$ce04d3a99e08e73b$var$delay","delay","$ce04d3a99e08e73b$var$step","step","$ce04d3a99e08e73b$var$amount","amount","$ce04d3a99e08e73b$var$delayCounter","$ce04d3a99e08e73b$var$createPromise","position","delay1","shouldResolve","Math","random","setTimeout","promise","then","param","delay2","$parcel$interopDefault","Notify","success","concat","timeout","catch","delay3","failure","$ce04d3a99e08e73b$var$processPromise","Promise","resolve","reject","addEventListener","evt","preventDefault","delayRef","Number","value","stepRef","amountRef","step1","amount1","i","$ce04d3a99e08e73b$var$trackPromises"],"version":3,"file":"03-promises.8e4cfa23.js.map"}